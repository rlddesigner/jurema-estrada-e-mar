---
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";

const oracoes = await getCollection("posts");
const oracoesFiltradas = oracoes
  .filter(post => post.data.categoria === "oração")
  .sort((a, b) => new Date(b.data.pubDate) - new Date(a.data.pubDate));
---

<Layout>
  <main>
    <h1>✨ Todas as Orações</h1>
    <p class="boas-vindas">Encontre aqui orações guiadas por luz, axé e acolhimento espiritual.</p>

    <div class="posts-list">
      {oracoesFiltradas.map(post => (
        <article class="post-card">
          <img src={post.data.image} alt={post.data.title} />
          <h3><a href={`/posts/${post.slug}`}>{post.data.title}</a></h3>
          <p>{post.data.description}</p>
        </article>
      ))}
    </div>
  </main>
</Layout>
