---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const ensinamentos = await getCollection('ensinamentos');

// Organiza do mais recente pro mais antigo
const ensinamentosRecentes = ensinamentos
  .filter((e) => e.data.pubDate)
  .sort((a, b) => new Date(b.data.pubDate) - new Date(a.data.pubDate));
---

<Layout 
  title="Ensinamentos Espirituais"
  description="ReflexÃµes, fundamentos e sabedorias da Umbanda, compartilhados com amor e axÃ©."
>
  <main class="pagina-lista">
    <section class="secao-home">
      <h1>ğŸ“˜ Ensinamentos Espirituais</h1>
      <div class="grade-ensinamentos">
        {ensinamentosRecentes.map(({ data }) => (
          <a href={`/ensinamentos/${data.slug}`} class="card-oracao">
            {data.image && <img src={data.image} alt={data.title} />}
            <h3>{data.title}</h3>
            <p>{data.description}</p>
          </a>
        ))}
      </div>
    </section>
  </main>
</Layout>
