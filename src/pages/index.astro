---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

// Ãšltimas oraÃ§Ãµes
const oracoes = await getCollection('oracoes');
const oracoesRecentes = oracoes
  .filter((o) => o.data.pubDate)
  .sort((a, b) => new Date(b.data.pubDate) - new Date(a.data.pubDate))
  .slice(0, 3);

// Ãšltimos ensinamentos
const ensinamentos = await getCollection('ensinamentos');
const ensinamentosRecentes = ensinamentos
  .filter((e) => e.data.pubDate)
  .sort((a, b) => new Date(b.data.pubDate) - new Date(a.data.pubDate))
  .slice(0, 3);

// Ãšltimos pontos cantados
const pontos = await getCollection('pontos');
const pontosRecentes = pontos
  .filter((p) => p.data.pubDate)
  .sort((a, b) => new Date(b.data.pubDate) - new Date(a.data.pubDate))
  .slice(0, 3);
---

<Layout 
  title="InÃ­cio"
  description="Bem-vinde ao Jurema, Estrada e Mar â€“ um espaÃ§o espiritual com oraÃ§Ãµes, pontos cantados e ensinamentos guiados por luz e axÃ©."
>
  <main class="inicio">

<!-- ğŸŒ¿ Carrossel de Curiosidades Espirituais -->
<section class="curiosidades-carrossel">
  <div class="carrossel-inner">
    <div class="carrossel-item">ğŸŒ¿ Segunda-feira Ã© dia de firmeza para Pretos Velhos.</div>
    <div class="carrossel-item">ğŸ’› Sexta-feira Ã© o dia de Oxum, ideal para banhos de autoestima.</div>
    <div class="carrossel-item">ğŸ”´ TerÃ§a vibra com Ogum â€“ bom para abrir caminhos.</div>
    <div class="carrossel-item">âš–ï¸ Quarta Ã© o dia de XangÃ´ â€“ para pedidos de justiÃ§a.</div>
    <div class="carrossel-item">âš« Segunda e sexta sÃ£o dias de firmeza para Exu.</div>
    <div class="carrossel-item">ğŸ¤ Quinta vibra com OxalÃ¡ â€“ ideal para oraÃ§Ãµes e limpeza.</div>
    <div class="carrossel-item">ğŸŒªï¸ TerÃ§a e sÃ¡bado sÃ£o dias fortes para IansÃ£.</div>
    <div class="carrossel-item">ğŸŒŠ Segunda-feira Ã© associada a IemanjÃ¡ e Ã s Ã¡guas.</div>
    <div class="carrossel-item">ğŸŒ• Lua cheia potencializa banhos e firmezas.</div>
    <div class="carrossel-item">ğŸ•¯ï¸ Sempre acenda velas com intenÃ§Ã£o e oraÃ§Ã£o.</div>
  </div>
</section>
    
    <!-- ğŸ•Šï¸ Ãšltimas OraÃ§Ãµes -->
    <section class="secao-home">
      <h2>ğŸ•Šï¸ Ãšltimas OraÃ§Ãµes</h2>
      <div class="grade-oracoes home">
        {oracoesRecentes.map(({ data }) => (
          <a href={`/oracoes/${data.slug}`} class="card-oracao">
            <img src={data.image} alt={data.title} />
            <h3>{data.title}</h3>
          </a>
        ))}
      </div>
    </section>

    <!-- ğŸ“˜ Ãšltimos Ensinamentos -->
    <section class="secao-home">
      <h2>ğŸ“˜ Ensinamentos Recentes</h2>
      <div class="grade-oracoes home">
        {ensinamentosRecentes.map(({ data }) => (
          <a href={`/ensinamentos/${data.slug}`} class="card-oracao">
            {data.image && <img src={data.image} alt={data.title} />}
            <h3>{data.title}</h3>
          </a>
        ))}
      </div>
    </section>

    <!-- ğŸ¶ Ãšltimos Pontos Cantados -->
    <section class="secao-home">
      <h2>ğŸ¶ Pontos Cantados Recentes</h2>
      <div class="grade-oracoes home">
        {pontosRecentes.map(({ data }) => (
          <a href={`/pontos/${data.slug}`} class="card-oracao">
            <h3>{data.title}</h3>
          </a>
        ))}
      </div>
    </section>

<!-- ğŸŒ¼ SaudaÃ§Ã£o -->
    <section class="saudacao">
      <h1>Jurema, Estrada e Mar</h1>
      <p>
        Aqui a palavra Ã© cura. O canto Ã© oraÃ§Ã£o.<br/>
        O axÃ© Ã© luz. Seja bem-vinde ao nosso espaÃ§o de fÃ©, sabedoria ancestral e acolhimento espiritual.
      </p>
    </section>

  </main>
</Layout>
