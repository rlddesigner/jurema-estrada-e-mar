---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const pontos = await getCollection('pontos');

// Organiza por data (mais novos no topo)
const pontosRecentes = pontos
  .filter((p) => p.data.pubDate)
  .sort((a, b) => new Date(b.data.pubDate) - new Date(a.data.pubDate));
---


<Layout>
<section class="secao-pontos">
  <h2>ðŸ“» RÃ¡dio Umbanda ao Vivo</h2>
  <div class="player-radio">
    <iframe 
      src="https://player.maxcast.com.br/sandrocm"
      width="100%"
      height="100"
      frameborder="0"
      allow="autoplay"
    ></iframe>
  </div>

  <div class="layout-pontos">
    <!-- Coluna 1: Lista lateral -->
    <aside class="lista-lateral">
      <h3>ðŸŽµ Todos os Pontos</h3>
      <ul>
        {pontosRecentes.map(({ data }) => (
          <li><a href={`/pontos/${data.slug}`}>{data.title}</a></li>
        ))}
      </ul>
    </aside>

    <!-- Coluna 2: Cards -->
    <div class="grade-pontos">
      {pontosRecentes.map(({ data }) => (
        <a href={`/pontos/${data.slug}`} class="card-oracao">
          <h3>{data.title}</h3>
        </a>
      ))}
    </div>
  </div>
</section>
3
  </main>
</Layout>
