---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const pontos = await getCollection('pontos');

// Organiza por data (mais novos no topo)
const pontosRecentes = pontos
  .filter((p) => p.data.pubDate)
  .sort((a, b) => new Date(b.data.pubDate) - new Date(a.data.pubDate));
---


<Layout>
<section class="player-radio">
  <h1>📻 Rádio Umbanda ao Vivo</h2>
  <iframe 
    src="https://player.maxcast.com.br/sandrocm" 
    width="100%" 
    height="100" 
    frameborder="0" 
    allow="autoplay" 
    style="border-radius: 8px;"
  ></iframe>
</section>
  <main class="pagina-lista">
    <section class="secao-home">
      <h2>🎶 Pontos Cantados Recentes</h2>
      <div class="grade-oracoes home">
        {pontosRecentes.map(({ data }) => (
          <a href={`/pontos/${data.slug}`} class="card-oracao">
            <h3>{data.title}</h3>
          </a>
        ))}
      </div>
    </section>
  </main>
</Layout>
